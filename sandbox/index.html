<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="WebRTC TURN server sandbox" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1"
    />
    <meta itemprop="description" content="Webrtc example" />
    <meta itemprop="image" content="../../../images/webrtc-icon-192x192.png" />
    <meta itemprop="name" content="Webrtc example" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta id="theme-color" name="theme-color" content="#ffffff" />

    <base target="_blank" />

    <title>WebRTC sandbox</title>

    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <div id="container">
      <a href="https://github.com/turnwebrtc/samples/tree/main/sandbox"
        >view source on GitHub</a
      >

      <h1>TurnWebRTC Sandbox</h1>
      <p>
        This page lets you spin up a peer-to-peer or TURN-relayed WebRTC
        connection in seconds. It's backed by the public demo API key so anyone
        landing here can try it instantly. Replace
        <code>demo-api-key</code> with a key from
        <a href="https://turnwebrtc.com/api-docs" target="_blank"
          >turnwebrtc.com</a
        >
        to get your own private namespace & production traffic.
      </p>
      <p>
        Try opening this page on 2 different devices and join the same room.
      </p>

      <video
        id="localVideo"
        style="transform: scaleX(-1)"
        playsinline
        autoplay
        muted
      ></video>
      <div id="remoteVideos"></div>

      <div class="box">
        <div>
          <label for="room-textbox">Room:</label>
          <input
            field="text"
            id="room-textbox"
            placeholder="room"
            autocomplete="off"
          />
        </div>
        <div>
          <label for="apiKey-textbox">API&nbsp;Key:</label>
          <input
            field="text"
            id="apiKey-textbox"
            placeholder="try 'demo-api-key'"
            value="demo-api-key"
            size="24"
            autocomplete="off"
          />
          <br />
          <a href="https://turnwebrtc.com/api-docs"
            >get your private key at turnwebrtc.com</a
          >
        </div>
        <div>
          <label for="offer-datachannel">Offer data channel:</label>
          <input
            type="checkbox"
            id="offer-datachannel"
            checked
            autocomplete="off"
          />
        </div>
        <div>
          <label for="offer-localvideo">Offer local video:</label>
          <input type="checkbox" id="offer-localvideo" autocomplete="off" />
        </div>
        <div style="display: none">
          <label for="offer-receivevideo">Offer to receive video:</label>
          <input type="checkbox" id="offer-receivevideo" checked autocomplete="off" />
        </div>
        <div style="display: none">
          <label for="offer-relayonly">Relay only:</label>
          <input type="checkbox" id="offer-relayonly" autocomplete="off" />
        </div>
        <div>
          <label for="offer-prefersofferer">Prefers offerer:</label>
          <input
            type="checkbox"
            id="offer-prefersofferer"
            checked
            autocomplete="off"
          />
        </div>
        <div>
          <button id="startButton">Connect</button>
          <button id="hangupButton" style="display: hidden;">Hang Up</button>
        </div>
        <div>
          <span>Click the connect button to make a call</span>
        </div>
        <div>
          <span>Data channel log:</span>
        </div>
        <div>
          <div id="dataChannelTextField" autocomplete="off"></div>
        </div>
        <div>
          <input
            field="text"
            id="message-textbox"
            placeholder="message"
            autocomplete="off"
          />
          <button id="sendMessageButton" disabled>Send message</button>
          <button onclick="clearDatachannelLog()">Clear</button>
        </div>
      </div>

      <p id="debug-info" style="display: none">
        For stats, go to:
        <code id="debug-link">chrome://webrtc-internals</code>
      </p>
      <script>
        const debugInfo = document.getElementById("debug-info");
        const debugLink = document.getElementById("debug-link");
        const userAgent = navigator.userAgent;

        if (userAgent.includes("Firefox")) {
          debugLink.textContent = "about:webrtc";
          debugInfo.style.display = "block";
        } else if (userAgent.includes("Opera")) {
          debugLink.textContent = "opera://webrtc-internals";
          debugInfo.style.display = "block";
        } else if (userAgent.includes("Chrome")) {
          debugInfo.style.display = "block";
        }
      </script>
    </div>
    <script src="index.js"></script>
  </body>
</html>
